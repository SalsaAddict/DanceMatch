var DanceMatch;(function(n){function i(){var n=function(n){n.debugEnabled(!0)};return n.$inject=["$logProvider"],n}function r(){var n=function(n){n.debug("dm:run")};return n.$inject=["$log"],n}function t(n){angular.isUndefined(n)||(n.preventDefault(),n.stopPropagation())}var u,f,e;n.debugEnabled=!0;n.fbAppId="478292336279902";n.fbGraphApiVersion="v3.3";n.Config=i;n.Run=r,function(n){var t=function(){function n(n,t,i){this.$http=n;this.$q=t;this.$log=i}return n.prototype.execute=function(n,t){var i=this,r=this.$q.defer(),u={name:n,parameters:t};return this.$http.post("execute.ashx",u).then(function(n){i.$log.debug("dm:execute:success",u,n);r.resolve(n.data)},function(n){i.$log.debug("dm:execute:error",u,n);i.$log.error("dm:execute:error","An unexpected error occurred.");r.reject(n.data)}),r.promise},n.$inject=["$http","$q","$log"],n}();n.Service=t}(u=n.Database||(n.Database={})),function(i){var r=function(){function i(t,i,r,u){var f=this;this.$document=t;this.$window=i;this.dmDatabase=r;this.$log=u;i.fbAsyncInit=function(){FB.init({appId:n.fbAppId,status:!0,xfbml:!0,version:n.fbGraphApiVersion});FB.Event.subscribe("auth.authResponseChange",function(n){f.$log.debug("dm:fb:authResponse",n);try{n.status==="connected"?FB.api("/me",{fields:["id","name"]},function(n){f.$log.debug("dm:fb:me",n);r.execute("Login",n).then(function(){f._user=n},function(){delete f._user})}):delete f._user}catch(t){delete f._user}});u.debug("dm:fb:init")}}return Object.defineProperty(i.prototype,"user",{get:function(){return this._user},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"authenticated",{get:function(){return angular.isDefined(this._user)},enumerable:!0,configurable:!0}),i.prototype.login=function(n){t(n);FB.login(angular.noop)},i.prototype.logout=function(n){t(n);FB.logout(angular.noop)},i.$inject=["$document","$window","dmDatabase","$log"],i}();i.Service=r}(f=n.Authentication||(n.Authentication={})),function(n){var t=function(){function n(n){this.dmAuth=n}return n.prototype.$postLink=function(){},n.$inject=["dmAuth"],n}();n.Controller=t}(e=n.Menu||(n.Menu={}))})(DanceMatch||(DanceMatch={}));angular.module("DanceMatch",["ngRoute","ngAnimate"]).config(DanceMatch.Config()).run(DanceMatch.Run()).service("dmDatabase",DanceMatch.Database.Service).service("dmAuth",DanceMatch.Authentication.Service).controller("dmMenuController",DanceMatch.Menu.Controller);