var DanceMatch;(function(n){function i(){var n=function(n,i){n.when("/home",{name:"home",templateUrl:"views/home.html"}).when("/profile/:userId",{name:"profile",templateUrl:"views/profile.html",controller:t.Controller,controllerAs:"ctrl"}).otherwise({redirectTo:"/home"}).caseInsensitiveMatch=!0;i.debugEnabled(!0)};return n.$inject=["$routeProvider","$logProvider"],n}function r(){var n=function(n){n.debug("dm:run")};return n.$inject=["$log"],n}function u(n){angular.isUndefined(n)||(n.preventDefault(),n.stopPropagation())}var f,e,o,t;n.debugEnabled=!0;n.fbAppId="478292336279902";n.fbGraphApiVersion="v3.3";n.Config=i;n.Run=r,function(n){var t=function(){function n(n,t,i,r){this.$http=n;this.$q=t;this.$routeParams=i;this.$log=r}return n.prototype.execute=function(n,t,i){var u=this,f,r;return t===void 0&&(t=!0),f=this.$q.defer(),r={name:n,parameters:{}},angular.isArray(t)?angular.forEach(t,function(n){r.parameters[n]=u.$routeParams[n]}):t===!0&&angular.forEach(this.$routeParams,function(n,t){r.parameters[t]=n}),angular.isObject(i)&&angular.extend(r.parameters,i),this.$http.post("execute.ashx",r).then(function(n){u.$log.debug("dm:execute:success",r,n);f.resolve(n.data)},function(n){u.$log.debug("dm:execute:error",r,n);u.$log.error("dm:execute:error","An unexpected error occurred.");f.reject(n.data)}),f.promise},n.$inject=["$http","$q","$routeParams","$log"],n}();n.Service=t}(f=n.Database||(n.Database={})),function(t){var i=function(){function t(t,i,r,u){var f=this;this.$log=u;i.fbAsyncInit=function(){FB.init({appId:n.fbAppId,version:n.fbGraphApiVersion,status:!0});FB.Event.subscribe("auth.authResponseChange",function(n){f.$log.debug("dm:fb:authResponse",n);try{n.status==="connected"?FB.api("/me",{fields:["id","name"]},function(n){f.$log.debug("dm:fb:me",n);r.execute("Login",!1,n).then(function(){f._user=n},function(){delete f._user})}):delete f._user}catch(i){delete f._user}finally{t.$apply()}});u.debug("dm:fb:init")}}return Object.defineProperty(t.prototype,"user",{get:function(){return this._user},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authenticated",{get:function(){return angular.isDefined(this._user)},enumerable:!0,configurable:!0}),t.prototype.toggle=function(n){u(n);this.authenticated?FB.logout(angular.noop):FB.login(angular.noop)},t.$inject=["$rootScope","$window","dmDatabase","$log"],t}();t.Service=i}(e=n.Authentication||(n.Authentication={})),function(n){var t=function(){function n(n){this.dmAuth=n}return n.prototype.$postLink=function(){},n.$inject=["dmAuth"],n}();n.Controller=t}(o=n.Menu||(n.Menu={})),function(n){var t=function(){function n(n,t,i){this.$scope=n;this.dmDatabase=t;this.$routeParams=i;t.execute("Profile",!0).then(function(i){n.profile=i[0];t.execute("Age",!1).then(function(i){n.ages=i;t.execute("Country",!1).then(function(i){n.countries=i;t.execute("Quality",!0).then(function(t){n.qualities=t})})})})}return n.$inject=["$scope","dmDatabase","$routeParams"],n}();n.Controller=t}(t=n.Profile||(n.Profile={}))})(DanceMatch||(DanceMatch={}));angular.module("DanceMatch",["ngRoute","ngAnimate"]).config(DanceMatch.Config()).run(DanceMatch.Run()).service("dmDatabase",DanceMatch.Database.Service).service("dmAuth",DanceMatch.Authentication.Service).controller("dmMenuController",DanceMatch.Menu.Controller);